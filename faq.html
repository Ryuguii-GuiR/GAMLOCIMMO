<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gamloc Immo — FAQ (Gestion locative Airbnb à Nantes)</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --text:#0d0f16;
      --muted:#4b5565;
      --stroke:rgba(10,18,40,.12);

      --yellow:#f4bf13;
      --yellow2:#ffd86b;

      --blue:#0e4aa6;
      --blue2:#0b2b6b;
      --headerBlue: rgb(19, 42, 175);

      --shadow: 0 18px 60px rgba(3,7,18,.18);
      --softShadow: 0 14px 34px rgba(3,7,18,.07);
      --ease: cubic-bezier(.2,.8,.2,1);
    }

    *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;}
    body{background:var(--bg);color:var(--text);overflow-x:hidden;}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px;}

    body::before{
      content:"";position:fixed;top:-220px;left:-220px;width:720px;height:720px;
      background:radial-gradient(circle, rgba(244,191,19,.30), transparent 68%);
      filter:blur(170px);opacity:.16;z-index:-1;
    }
    body::after{
      content:"";position:fixed;bottom:-240px;right:-240px;width:680px;height:680px;
      background:radial-gradient(circle, rgba(14,74,166,.28), transparent 68%);
      filter:blur(190px);opacity:.16;z-index:-1;
    }

   
    header{
      position:fixed;top:0;left:0;width:100%;
      background:var(--headerBlue);
      backdrop-filter: blur(12px);
      border-bottom:1px solid rgba(244,191,19,.35);
      z-index:1000;
    }
    header::after{
      content:"";position:absolute;bottom:0;left:50%;transform:translateX(-50%);
      width:min(820px, 84%);
      height:1px;
      background:linear-gradient(90deg, transparent, var(--yellow), rgba(255,255,255,.65), transparent);
      opacity:.85;
    }
    .nav{
      max-width:1200px;margin:auto;
      display:flex;justify-content:space-between;align-items:center;
      padding:14px 20px;gap:18px;
    }
    .brand a{
      color:rgba(255,255,255,.96);
      font-weight:900;
      letter-spacing:2px;
      font-size:16px;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .brandDot{
      width:10px;height:10px;border-radius:999px;
      background:linear-gradient(180deg,var(--yellow2),var(--yellow));
      box-shadow:0 0 18px rgba(244,191,19,.35);
    }
    .navlinks{
      display:flex;gap:26px;list-style:none;flex-wrap:wrap;justify-content:flex-end;
    }
    .navlinks a{
      color:white;font-size:14px;position:relative;opacity:.96;font-weight:850;
    }
    .navlinks a::after{
      content:"";position:absolute;left:0;bottom:-8px;height:2px;width:0%;
      background:linear-gradient(90deg,var(--yellow),var(--yellow2));
      transition:.28s;
    }
    .navlinks a:hover::after{width:100%;}
    .navlinks a.active::after{width:100%;}
    .navlinks a.active{opacity:1;}

    .menuBtn{
      display:none;
      width:46px;height:46px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(255,255,255,.10);
      cursor:pointer;
      position:relative;
      transition: transform .18s, background .18s;
    }
    .menuBtn:hover{ background:rgba(255,255,255,.14); transform: translateY(-1px); }
    .menuIcon{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:22px;height:16px;}
    .menuIcon span{
      position:absolute;left:0;right:0;height:2px;border-radius:3px;background:#fff;
      transition: transform .25s ease, top .25s ease, opacity .18s ease;
    }
    .menuIcon span:nth-child(1){ top:0; }
    .menuIcon span:nth-child(2){ top:7px; opacity:.95; }
    .menuIcon span:nth-child(3){ top:14px; }
    body.menu-open .menuIcon span:nth-child(1){ top:7px; transform: rotate(45deg); }
    body.menu-open .menuIcon span:nth-child(2){ opacity:0; }
    body.menu-open .menuIcon span:nth-child(3){ top:7px; transform: rotate(-45deg); }

    .mobileOverlay{
      position:fixed;inset:0;
      background:rgba(3,7,18,.42);
      backdrop-filter: blur(10px);
      opacity:0;pointer-events:none;
      transition: opacity .25s ease;
      z-index:1400;
    }
    body.menu-open .mobileOverlay{opacity:1;pointer-events:auto;}

    .mobilePanel{
      position:absolute;top:0;right:0;height:100%;
      width:min(360px, 88vw);
      background:
        radial-gradient(700px 300px at 20% 0%, rgba(244,191,19,.20), transparent 60%),
        radial-gradient(700px 340px at 90% 20%, rgba(255,255,255,.12), transparent 55%),
        linear-gradient(180deg, rgba(19,42,175,.98), rgba(11,43,107,.98));
      border-left:1px solid rgba(244,191,19,.35);
      transform: translateX(18px);
      opacity:0;
      transition: transform .25s ease, opacity .25s ease;
      box-shadow: var(--shadow);
      padding:16px;
    }
    body.menu-open .mobilePanel{transform: translateX(0);opacity:1;}

    .mobileTop{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 4px 12px 4px;}
    .mobileTitle{
      color:rgba(255,255,255,.96);
      font-weight:900;letter-spacing:1.8px;font-size:13px;
      display:flex;align-items:center;gap:10px;
    }
    .mobileTitle .miniDot{
      width:8px;height:8px;border-radius:999px;
      background:linear-gradient(180deg,var(--yellow2),var(--yellow));
      box-shadow:0 0 14px rgba(244,191,19,.35);
    }
    .mobileLinks{list-style:none;display:grid;gap:10px;padding:10px 4px 0 4px;}
    .mobileLinks a{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 14px;border-radius:16px;
      color:white;font-weight:900;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.06);
      transform: translateY(6px);opacity:0;
      transition: opacity .25s ease, transform .25s ease, background .18s ease, border-color .18s ease;
    }
    body.menu-open .mobileLinks a{opacity:1;transform: translateY(0);}
    body.menu-open .mobileLinks li:nth-child(1) a{ transition-delay:.04s; }
    body.menu-open .mobileLinks li:nth-child(2) a{ transition-delay:.07s; }
    body.menu-open .mobileLinks li:nth-child(3) a{ transition-delay:.10s; }
    body.menu-open .mobileLinks li:nth-child(4) a{ transition-delay:.13s; }
    body.menu-open .mobileLinks li:nth-child(5) a{ transition-delay:.16s; }

    .mobileHint{
      margin-top:14px;
      padding:12px 14px;border-radius:16px;
      border:1px solid rgba(244,191,19,.28);
      background:linear-gradient(135deg, rgba(244,191,19,.10), rgba(255,255,255,.08));
      color:rgba(255,255,255,.88);
      font-size:12px;line-height:1.55;
    }

    
    .pageTop{padding-top:126px;}

    
    .faqHero{
      padding:50px 0 10px;
      text-align:center;
    }
    .kicker{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 14px;border-radius:999px;
      border:1px solid rgba(244,191,19,.45);
      background:linear-gradient(90deg, rgba(244,191,19,.12), rgba(14,74,166,.10));
      color:var(--blue2);
      font-size:12px;font-weight:900;
      margin:0 auto 14px;
      width:fit-content;
    }
    .kicker .dot{
      width:8px;height:8px;border-radius:999px;
      background:linear-gradient(180deg,var(--yellow2),var(--yellow));
      box-shadow:0 0 18px rgba(244,191,19,.25);
    }
    h1{
      font-size:54px;line-height:1.05;
      color:var(--blue2);
      letter-spacing:-.8px;
      margin:0 auto 12px;
      font-weight:900;
      max-width:18ch;
    }
    .lead{
      color:var(--muted);
      line-height:1.9;
      max-width:78ch;
      margin:0 auto 20px;
      font-size:15px;
      font-weight:600;
    }

    
    .searchWrap{
      max-width:880px;
      margin:0 auto 18px;
      display:grid;
      grid-template-columns: 1fr auto;
      gap:10px;
      align-items:center;
    }
    .search{
      border-radius:18px;
      border:1px solid rgba(10,18,40,.10);
      background:rgba(255,255,255,.78);
      box-shadow: var(--softShadow);
      padding:14px 14px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .search svg{width:18px;height:18px;opacity:.65}
    .search input{
      border:none;outline:none;background:transparent;
      width:100%;
      font-weight:800;
      color:#0d0f16;
    }
    .pillBtn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:14px 16px;border-radius:18px;
      border:1px solid rgba(244,191,19,.35);
      background:linear-gradient(135deg,var(--yellow),var(--yellow2));
      font-weight:950;
      cursor:pointer;
      box-shadow:0 12px 26px rgba(244,191,19,.18);
      transition: transform .18s var(--ease), box-shadow .18s var(--ease);
      color:#0b0d12;
      white-space:nowrap;
    }
    .pillBtn:hover{transform:translateY(-2px);box-shadow:0 18px 34px rgba(3,7,18,.10);}

  
    .faqWrap{
      max-width:980px;
      margin:18px auto 90px;
      border-radius:28px;
      border:1px solid rgba(10,18,40,.10);
      background:
        radial-gradient(1000px 420px at 10% 0%, rgba(244,191,19,.10), transparent 60%),
        radial-gradient(1000px 420px at 90% 0%, rgba(14,74,166,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.62));
      box-shadow: var(--softShadow);
      overflow:hidden;
    }
    .faqTop{
      padding:22px 22px 18px;
      border-bottom:1px solid rgba(10,18,40,.08);
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    .faqTop strong{
      font-size:16px;
      font-weight:950;
      color:var(--blue2);
      letter-spacing:-.2px;
    }
    .faqTop span{
      font-size:12px;
      font-weight:900;
      color:rgba(13,15,22,.62);
    }

    .faq{
      padding:16px;
      display:grid;
      gap:12px;
    }
    .item{
      border-radius:22px;
      border:1px solid rgba(10,18,40,.10);
      background:rgba(255,255,255,.84);
      box-shadow: 0 14px 30px rgba(3,7,18,.06);
      overflow:hidden;
      transform: translateY(10px);
      opacity:0;
      transition: transform .65s var(--ease), opacity .65s var(--ease), box-shadow .25s var(--ease);
    }
    .item.in{transform: translateY(0);opacity:1;}
    .item[aria-expanded="true"]{box-shadow: 0 22px 52px rgba(3,7,18,.10);}

    .btnQ{
      width:100%;
      border:none;background:transparent;cursor:pointer;
      padding:18px 18px;
      display:grid;
      grid-template-columns: 56px 1fr 56px;
      gap:14px;
      align-items:center;
      text-align:left;
    }

    .icon{
      width:56px;height:56px;border-radius:18px;
      display:grid;place-items:center;
      background:
        radial-gradient(28px 28px at 30% 25%, rgba(244,191,19,.30), transparent 55%),
        linear-gradient(180deg, rgba(19,42,175,.14), rgba(19,42,175,.06));
      border:1px solid rgba(19,42,175,.18);
      overflow:hidden;
    }
    .icon svg{width:20px;height:20px}
    .icon path{stroke:rgba(13,15,22,.78);stroke-width:2.5;stroke-linecap:round}

    .q{
      font-size:16px;
      font-weight:950;
      letter-spacing:-.2px;
      color:var(--blue2);
      line-height:1.25;
    }
    .chev{
      width:56px;height:56px;border-radius:18px;
      display:grid;place-items:center;
      background:rgba(244,191,19,.14);
      border:1px solid rgba(244,191,19,.28);
      transition: transform .45s var(--ease), background .2s var(--ease);
    }
    .chev svg{width:20px;height:20px}
    .chev path{stroke:#0b0d12;stroke-width:3;stroke-linecap:round;stroke-linejoin:round}
    .item[aria-expanded="true"] .chev{transform: rotate(180deg); background:rgba(244,191,19,.22);}

    .panel{
      max-height:0;
      overflow:hidden;
      transition:max-height .55s var(--ease);
    }
    .answer{
      padding:0 18px 18px;
      color:rgba(13,15,22,.78);
      font-weight:650;
      line-height:1.95;
      font-size:15px;
    }

    .reveal{opacity:0;transform: translateY(14px);transition: opacity .7s var(--ease), transform .7s var(--ease);}
    .reveal.in{opacity:1;transform: translateY(0);}

    footer{
      margin-top:70px;
      padding:44px 20px;
      text-align:center;
      border-top:1px solid var(--stroke);
      color:#6b7280;
      font-size:14px;
      font-weight:650;
    }

    @media(max-width:980px){
      h1{font-size:42px;max-width:22ch;}
      .searchWrap{grid-template-columns:1fr;}
      .pillBtn{width:100%;}
    }
    @media(max-width:820px){
      .navlinks{display:none;}
      .menuBtn{display:inline-block;}
      .nav{padding:12px 14px;}
      header::after{width:86%;}
    }
    @media(max-width:560px){
      .wrap{padding:0 14px;}
      .btnQ{grid-template-columns: 56px 1fr 56px;}
      .answer{font-size:14px;}
    }
  </style>
</head>

<body>
  <header>
    <div class="nav">
      <div class="brand">
        <a href="index.html"><span class="brandDot" aria-hidden="true"></span>GAMLOC IMMO</a>
      </div>

      <ul class="navlinks" aria-label="Navigation">
        <li><a href="services.html">Nos services</a></li>
        <li><a href="confier-mon-bien.html">Confier mon bien</a></li>
        <li><a href="appartements.html">Appartements</a></li>
        <li><a href="avis.html">Avis</a></li>
        <li><a href="faq.html" class="active">FAQ</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>

      <button class="menuBtn" id="menuBtn" type="button" aria-label="Ouvrir le menu" aria-expanded="false">
        <span class="menuIcon" aria-hidden="true"><span></span><span></span><span></span></span>
      </button>
    </div>
  </header>

  <div class="mobileOverlay" id="mobileOverlay" aria-hidden="true">
    <nav class="mobilePanel" aria-label="Menu mobile">
      <div class="mobileTop">
        <div class="mobileTitle"><span class="miniDot" aria-hidden="true"></span>GAMLOC IMMO</div>
        <button class="menuBtn" id="menuClose" type="button" aria-label="Fermer le menu">
          <span class="menuIcon" aria-hidden="true"><span></span><span></span><span></span></span>
        </button>
      </div>

      <ul class="mobileLinks">
        <li><a href="services.html">Nos services <span class="arrow">›</span></a></li>
        <li><a href="confier-mon-bien.html">Confier mon bien <span class="arrow">›</span></a></li>
        <li><a href="appartements.html">Appartements <span class="arrow">›</span></a></li>
        <li><a href="avis.html">Avis <span class="arrow">›</span></a></li>
        <li><a href="faq.html">FAQ <span class="arrow">›</span></a></li>
        <li><a href="contact.html">Contact <span class="arrow">›</span></a></li>
      </ul>

      <div class="mobileHint">
        Gestion locative courte durée à Nantes : optimisation, ménage, check-in/out, communication voyageurs.
      </div>
    </nav>
  </div>

  <main class="pageTop">
    <section class="wrap faqHero">
  
      <h1 class="reveal">On répond à vos questions</h1>
      <p class="lead reveal">
        Tout ce qu’il faut savoir sur la gestion locative, le bail, l’entretien et les garanties.
      </p>

      <div class="searchWrap reveal">
        <div class="search" role="search" aria-label="Rechercher dans la FAQ">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input id="search" type="search" placeholder="Rechercher : bail, loyers, LMNP, entretien..." />
        </div>
        <button class="pillBtn" type="button" id="openAll">Ouvrir tout</button>
      </div>
    </section>

    <section class="wrap faqWrap reveal" aria-label="FAQ">
      <div class="faqTop">
        <div>
          <strong>Questions fréquentes</strong><br>
          <span>Contenu identique à tes captures</span>
        </div>
        <span id="count">6 questions</span>
      </div>

      <div class="faq" id="faq">
        <!-- 1 -->
        <div class="item" aria-expanded="false" data-q="beneficier service eligibilite visite">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">Est-ce que je peux bénéficier de votre service ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              N’hésitez pas à nous contacter, afin de nous rencontrer et de fixer une visite.
              C’est la manière la plus efficace de vérifier si votre logement répond à nos critères
              d’éligibilité. Vous trouverez nos coordonnées de contact en bas de cette page, alors à bientôt !
            </div>
          </div>
        </div>

        <!-- 2 -->
        <div class="item" aria-expanded="false" data-q="entretien employes verification proprete impeccable">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">De quelle manière mon bien est-il entretenu ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              De manière fréquente, des employés d’entretien sont appelés pour effectuer une vérification des lieux,
              vérifier que tout est en ordre et garantir que le logement soit dans un état impeccable.
              C’est l’assurance pour vous d’un bien conservé en excellent état, avec des profits constants à court
              et à long terme.
            </div>
          </div>
        </div>

        <!-- 3 -->
        <div class="item" aria-expanded="false" data-q="agence immobiliere frais commission gestion locative">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">Est-ce que vous êtes une agence immobilière ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              Non ! Il n’y a pas de frais d’agence ni de commissions avec nous. La gestion locative est notre
              responsabilité ; nous louons votre bien afin de le mettre à disposition de nos voyageurs et clientèle
              professionnels. Que vous ayez loué ou non votre bien, vous recevrez le paiement de votre loyer dans les
              délais impartis.
            </div>
          </div>
        </div>

        <!-- 4 -->
        <div class="item" aria-expanded="false" data-q="loyers assures paiement priorite engagement">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">De quelle manière mes loyers sont assurés ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              Payer votre loyer est notre priorité absolue et notre premier engagement. En régularisant vos loyers,
              nous garantissons la pérennité de l’entreprise. Alors rassurez-vous, vous venez de trouver votre
              locataire idéal !
            </div>
          </div>
        </div>

        <!-- 5 -->
        <div class="item" aria-expanded="false" data-q="contrat location traditionnel bail derogatoire preavis souple treve hivernale">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">Quelles sont les distinctions entre un contrat de location traditionnel et le vôtre ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              Comme vous le savez, lors de la location d’un bien immobilier à un particulier, vous vous engagez pour
              une période temporaire. Une période de préavis de quelques mois est requise pour récupérer votre bien.
              Notre contrat de location est un contrat exceptionnel entre le propriétaire et notre entreprise.
              Notre contrat offre la possibilité au locataire et au propriétaire de s’en décharger à tout moment,
              en respectant un délai de préavis de seulement quelques semaines. Après avoir terminé les périodes de
              trêve hivernale, voici un bail beaucoup plus souple qui assure une plus grande sécurité aux propriétaires.
            </div>
          </div>
        </div>

        <!-- 6 -->
        <div class="item" aria-expanded="false" data-q="lmnp avantages fiscaux article 155 cgi loueur meuble non professionnel">
          <button class="btnQ" type="button">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </div>
            <div class="q">Vais-je perdre mes avantages fiscaux LMNP si je vous loue mon logement via votre bail dérogatoire ?</div>
            <div class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6"/></svg>
            </div>
          </button>
          <div class="panel">
            <div class="answer">
              Et bien non ! Notre bail ne fait pas échec, pour le propriétaire, au bénéfice du régime du loueur en
              meublé non professionnel de l’article 155 du Code général des impôts. Vous garderez vos avantages LMNP.
            </div>
          </div>
        </div>

      </div>
    </section>

    <footer>Gamloc Immo — Gestion locative Airbnb à Nantes</footer>
  </main>

  <script>
    // Mobile menu
    const menuBtn = document.getElementById("menuBtn");
    const overlay = document.getElementById("mobileOverlay");
    const menuClose = document.getElementById("menuClose");
    function openMenu(){
      document.body.classList.add("menu-open");
      menuBtn?.setAttribute("aria-expanded","true");
      overlay?.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function closeMenu(){
      document.body.classList.remove("menu-open");
      menuBtn?.setAttribute("aria-expanded","false");
      overlay?.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }
    menuBtn?.addEventListener("click", openMenu);
    menuClose?.addEventListener("click", closeMenu);
    overlay?.addEventListener("click", (e)=>{ if(e.target === overlay) closeMenu(); });
    window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeMenu(); });

    // Reveal
    const reveals = document.querySelectorAll(".reveal");
    const items = document.querySelectorAll(".item");
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(ent=>{
        if(ent.isIntersecting){
          ent.target.classList.add("in");
          io.unobserve(ent.target);
        }
      });
    }, {threshold:.12});
    reveals.forEach(el=>io.observe(el));
    items.forEach(el=>io.observe(el));

    // Accordion
    function setOpen(item, open){
      const panel = item.querySelector(".panel");
      const plusSvg = item.querySelector(".icon svg");
      if(!panel) return;

      if(open){
        item.setAttribute("aria-expanded","true");
        panel.style.maxHeight = panel.scrollHeight + "px";
        if(plusSvg) plusSvg.innerHTML = '<path d="M5 12h14"/>';
      }else{
        item.setAttribute("aria-expanded","false");
        panel.style.maxHeight = "0px";
        if(plusSvg) plusSvg.innerHTML = '<path d="M12 5v14M5 12h14"/>';
      }
    }

    items.forEach(item=>{
      const btn = item.querySelector(".btnQ");
      const panel = item.querySelector(".panel");
      if(panel) panel.style.maxHeight = "0px";

      btn?.addEventListener("click", ()=>{
        const isOpen = item.getAttribute("aria-expanded") === "true";
        // ferme les autres
        items.forEach(o=>{ if(o !== item) setOpen(o,false); });
        setOpen(item, !isOpen);
      });
    });

    window.addEventListener("resize", ()=>{
      items.forEach(item=>{
        if(item.getAttribute("aria-expanded") === "true"){
          const panel = item.querySelector(".panel");
          if(panel) panel.style.maxHeight = panel.scrollHeight + "px";
        }
      });
    });

    // Search filter
    const search = document.getElementById("search");
    search?.addEventListener("input", ()=>{
      const q = search.value.trim().toLowerCase();
      items.forEach(item=>{
        const key = (item.getAttribute("data-q") || "").toLowerCase();
        const title = (item.querySelector(".q")?.textContent || "").toLowerCase();
        const ok = !q || key.includes(q) || title.includes(q);
        item.style.display = ok ? "" : "none";
      });
    });

    // Open all toggle
    const openAll = document.getElementById("openAll");
    let allOpen = false;
    openAll?.addEventListener("click", ()=>{
      allOpen = !allOpen;
      items.forEach(it=>setOpen(it, allOpen));
      openAll.textContent = allOpen ? "Fermer tout" : "Ouvrir tout";
    });
  </script>
</body>
</html>
